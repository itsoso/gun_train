# 更新日志

本文档记录了智能枪械训练监控系统的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [Unreleased]

### 计划中
- VR虚拟训练模式
- 移动端App（iOS/Android）
- 智能训练计划自动生成
- 多语言支持（English, 日本語）

## [1.0.0] - 2024-01-06

### ✨ 新增

#### AI视觉识别
- 🤖 基于MediaPipe的人体姿态识别系统
- 🎯 动作规范性分析引擎（4维度评分）
- 🔍 枪支目标检测模块（YOLOv8）
- ⚠️ 三级危险预警系统（Critical/Serious/Notice）

#### 训练流程管理
- 📋 完整的训练流程控制（空枪→考核→实弹）
- 👥 学员工位分配和管理
- 📊 训练进度实时跟踪
- ✅ 空枪训练资格自动检查（连续5次≥80分）
- 🔫 弹药领用和使用管理

#### 实时监控系统
- 📹 多路视频流处理（支持150路摄像头）
- 🔌 WebSocket实时通信
- 👨‍🏫 教官监控中心（50工位同时监控）
- 🎯 学员训练终端（实时反馈）
- 📈 领导统计看板

#### 数据统计报告
- 📊 个人训练档案和进步趋势
- 📈 场次统计和分析
- 👨‍🏫 教官工作量统计
- 📑 Excel报告导出
- 📉 数据可视化

#### API和文档
- 🚀 RESTful API（FastAPI）
- 📖 Swagger API文档（自动生成）
- 📚 完整的技术文档和使用手册
- 🚀 部署指南和运维手册

### 🔧 技术实现

#### 后端
- Python 3.9+
- FastAPI 0.109.0
- SQLAlchemy（PostgreSQL）
- PyMongo（MongoDB）
- Redis（缓存和消息队列）
- Celery（异步任务）

#### AI模型
- MediaPipe Pose（姿态识别）
- YOLOv8（目标检测）
- OpenCV（视频处理）

#### 前端
- HTML5 + CSS3 + JavaScript
- WebSocket（实时通信）

### 📊 性能指标

- 姿态识别准确率：>95%
- 动作规范判定准确率：>90%
- 危险行为识别召回率：>90%
- 系统响应延迟：<100ms
- 支持并发：50工位（150路视频流）
- 视频处理帧率：10fps

### 📝 文档

- ✅ README.md（项目概述）
- ✅ 技术方案详细设计
- ✅ 部署指南
- ✅ 使用手册
- ✅ API文档
- ✅ 贡献指南

### 🎯 核心功能

#### 持枪姿势分析（30%权重）
- 肘部角度检测（90-120度标准）
- 双手握持方式判定
- 肩部水平度检查
- 手臂伸展度评估

#### 扳机纪律检测（30%权重）
- 非射击状态手指位置监控
- 手指-扳机距离实时计算
- 食指伸直度评估
- 严重违规自动报警

#### 瞄准线分析（20%权重）
- 眼睛-手部高度关系
- 头部位置和稳定性
- 肩-手-眼对齐度
- 头部倾斜检测

#### 稳定性评估（20%权重）
- 手腕位置抖动分析（历史30帧）
- 身体重心稳定性
- 动作流畅度评分
- 连续性判定

### 🏗️ 项目结构

```
gun_train/
├── backend/
│   ├── ai/              # AI模型
│   ├── api/             # API接口
│   ├── core/            # 核心业务
│   └── db/              # 数据库
├── frontend/
│   ├── student/         # 学员端
│   ├── admin/           # 教官端（待完善）
│   └── leader/          # 领导端（待完善）
├── docs/                # 文档
├── scripts/             # 脚本
└── requirements.txt     # 依赖
```

### 🐛 已知问题

- 教官端和领导端界面待完善
- 枪支检测模型需要专门训练
- 缺少Docker部署配置
- 缺少自动化测试

## [0.1.0] - 2024-01-01

### ✨ 新增
- 项目初始化
- 基础架构搭建
- 技术方案设计

---

## 版本说明

### 版本格式
- **主版本号（Major）**：不兼容的API修改
- **次版本号（Minor）**：向下兼容的功能性新增
- **修订号（Patch）**：向下兼容的问题修正

### 变更类型
- **✨ 新增（Added）**：新功能
- **🔧 变更（Changed）**：现有功能的变更
- **🗑️ 弃用（Deprecated）**：即将移除的功能
- **🗑️ 移除（Removed）**：已移除的功能
- **🐛 修复（Fixed）**：Bug修复
- **🔒 安全（Security）**：安全问题修复

[Unreleased]: https://github.com/itsoso/gun_train/compare/v1.0.0...HEAD
[1.0.0]: https://github.com/itsoso/gun_train/releases/tag/v1.0.0
[0.1.0]: https://github.com/itsoso/gun_train/releases/tag/v0.1.0

